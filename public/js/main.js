!function(e){var t=function(){var e={},t={};return e.ajaxComplete=function(e){return e?4===e.readyState&&200===e.status?JSON.parse(e.responseText):!1:!1},e.newAjaxInstance=function(){return new XMLHttpRequest},t.getJSON=function(t){var n=e.newAjaxInstance();return n.open("GET",t,!1),n.send(null),e.ajaxComplete(n)},t}();e.Ajax=t}(window,document),function(e){var t=function(){var e={};return e.init=function(){console.log("ModelKlipim"),e.getJSONData()},e.getJSONData=function(){return console.log("getJSONData"),Ajax.getJSON("/public/json/stickers.json")},e.getStickerInfo=function(e){return JSON.parse(e.getAttribute("data-sticker-info").split("'").join('"'))},e}();e.ModelKlipim=t}(window,document),function(e,t){var n=function(){var n={},o={};return n.canvas=new fabric.Canvas("canvas"),n.modelKlipim=ModelKlipim,n.addStickerOnLoad=function(){var e=t.querySelector("#img-0"),i=n.modelKlipim.getStickerInfo(e);o.addStickerOnCanvas(e),o.addStickerInfo(i)},n.addStickersToView=function(){console.log("AddStickersToView");for(var e,o,i=t,c=n.modelKlipim.getJSONData(),r=i.querySelector("#stickers-list"),a=i.createDocumentFragment(),l=c.length;l--;)e=i.createElement("li"),e.classList.add("sticker-item","sticker-"+l),o=n.createNewSticker(c[l],l),e.appendChild(o),a.insertBefore(e,a.firstChild);r.appendChild(a)},n.createNewSticker=function(e,n){var o,i=t;return o=i.createElement("img"),o.classList.add("sticker-item-image"),o.id="img-"+n,o.src="/stickers/"+e.path,o.setAttribute("data-sticker-info",JSON.stringify(e).split('"').join("'")),o},n.initEvents=function(){var o=t,i=o.querySelectorAll(".sticker-item-image");[].forEach.call(i,function(e){e.addEventListener("click",n.selectSticker,!1)}),e.addEventListener("load",n.addStickerOnLoad,!1)},n.selectSticker=function(){var e=this,t=n.modelKlipim.getStickerInfo(e);o.addStickerOnCanvas(e),o.addStickerInfo(t)},o.addStickerInfo=function(e){var n=t,o=n.querySelector(".sticker-title"),i=n.querySelector(".sticker-link"),c=n.querySelector(".btn-download");o.textContent=e.name,i.textContent=i.href=e.website,c.href="/stickers/"+e.path},o.addStickerOnCanvas=function(e){var t=n.canvas,o=new fabric.Image(e,{left:t.width-3*e.width,top:t.height-3*e.height,scaleX:2,scaleY:2});o.lockUniScaling=!0,t.remove(t.item(0)),t.add(o),t.setActiveObject(t.item(0))},o.init=function(){console.log("Controller Klipim Init"),n.addStickersToView(),n.initEvents()},o}();e.ControllerKlipim=n}(window,document),function(e,t){"use strict";var n="klip.im"===e.location.hostname,o="?development"===e.location.search,i=n&&!o;i&&(e.console=console||{},console.assert=console.clear=console.constructor=console.count=console.debug=console.dir=console.dirxml=console.error=console.group=console.groupCollapsed=console.groupEnd=console.info=console.log=console.markTimeline=console.profile=console.profileEnd=console.table=console.time=console.timeEnd=console.timeStamp=console.timeline=console.timelineEnd=console.trace=console.warn=function(){return!1});var c=function(){var e={};return e.init=function(){console.log("Init"),ControllerKlipim.init()},e}();t.addEventListener("DOMContentLoaded",function(){c.init()})}(window,document);